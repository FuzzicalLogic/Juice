(function(S,$){var ns="Juice";var NIL=function(){};(function(S,A){var namespace=ns+".Animation";A.prototype={play:function(){var _=this;console.log(_);var fps=_.fps,len=_.length,sec=1000,nFrames=fps*(len/sec);_.maxFrames=nFrames;_.setup(_);_.loops=0;_.isStopped=false;if(_.timer){clearInterval(_.timer)}_.timer=setInterval(function(){if(!(_.isStopped)){_.draw()}else{clearInterval(_.timer)}},1000/fps)},stop:function(){this.isStopped=false;if(this.timer){clearInterval(this.timer)}},draw:function(){var _=this,f=_.frame,max=_.maxFrames,c2d=_.context,cache=_.cache;if(!f){_.frame=0}c2d.clearRect(0,0,_.wFull,_.hFull);if(f in cache){c2d.putImageData(cache[f],0,0)}else{_.cache[f]=_.drawFrame()}if(++_.frame>=max){_.loops++;_.frame=0;if(_.onLoop){_.onLoop(_.loops)}}},drawFrame:function(){var _=this,f=_.frame,c2d=_.context;var w=_.wFull,h=_.hFull;c2d.globalAlpha=_.alpha;$.each(this.points,function(){this.draw(f/_.maxFrames)});return c2d.getImageData(0,0,w,h)}}}(S,S.Animation=S.Animation||function(data){var l,i,trl,pts,d=!data?{}:data;this.cssID=!d.cssID?null:d.cssID;this.cssClass=!d.cssClass?ns:d.cssClass;this.w=!d.w?50:d.w;this.h=!d.h?50:d.h;this.padding=!d.padding?0:d.padding;this.wFull=this.w+2*this.padding;this.hFull=this.h+2*this.padding;this.cache=[];this.context=!d.context?null:d.context;this.length=!d.length?1000:d.length;this.fps=!d.fps?30:d.fps;this.alpha=!d.alpha?1:d.alpha;this.ptSize=!d.ptSize?10:d.ptSize;this.setup=!d.setup?NIL:d.setup;this.onSetup=!d.onSetup?NIL:d.onSetup;this.onLoop=!d.onLoop?NIL:d.onLoop;trl=!d.trail?{}:d.trail;this.trail=new Juice.Trail(trl);this.points=[];pts=!d.points?[{}]:d.points;l=pts.length;for(i=0;i<l;i++){this.points[i]=new Juice.Point(this,pts[i])}return this}));(function(S,P){var namespace=ns+".Point";P.prototype.draw=function(p){var _=this,t=_.trail,ptProgress=0;for(var pt=0,a=t.points+1;pt++<a&&!_.isStopped;){ptProgress=p-((a-pt)*t.distance);if(ptProgress<0){ptProgress=ptProgress+1}this.modifier=(pt/a);if(this.paths){_.path=_.paths;if(typeof _.paths=="function"){_.paths(ptProgress,_)}else{if(typeof _.paths=="object"){_.paths.draw(ptProgress,_)}}}else{}}};P.prototype.canFade=function(){return this.trail.fade};P.prototype.canResize=function(){return this.trail.transform};P.prototype.onDestroy=function(){if(this.Animation){this.Animation=null}};(function(P,C){C.prototype.draw=P.prototype.draw;C.prototype.canFade=P.prototype.canFade;C.prototype.canResize=P.prototype.canResize;C.prototype.onDestroy=P.prototype.onDestroy;C.prototype.render=function(x,y){var c2d,s,a,A=this.Animation;if(A){if(A.context){c2d=A.context}else{console.log("Invalid Canvas Context2D")}}else{console.log("This Point has no Animation")}x=!x?0:x;y=!y?0:y;s=!(this.ptSize)?1:this.ptSize;a=s/2;if(this.canResize()){s=s*this.modifier}if(this.canFade()){c2d.globalAlpha=this.alpha*this.modifier}c2d.fillStyle=this.color;c2d.beginPath();c2d.arc(x,y,a,0,360,false);c2d.fill();c2d.closePath()}}(P,P.Round=P.Round||function(anim,data){var d=!data?{}:data;if(anim){this.Animation=anim}this.ptSize=!d.size?anim.ptSize:d.size;this.color=d.color?d.color:anim.color;this.alpha=d.alpha?d.alpha:anim.alpha;this.paths=new Juice.Path(anim,d.paths);this.trail=(!d.trail)?new Juice.Trail(anim.trail):new Juice.Trail(d.trail);if(this.trail){var t=this.trail,a=this.Animation;this.trail.distance=(t.length/a.length)/(t.points+1)}return this}));(function(P,R){R.prototype.draw=P.prototype.draw;R.prototype.canFade=P.prototype.canFade;R.prototype.canResize=P.prototype.canResize;R.prototype.onDestroy=P.prototype.onDestroy;R.prototype.render=function(x,y){var c2d,s,a,A=this.Animation;if(A){if(A.context){c2d=A.context}else{console.log("Invalid Canvas Context2D")}}else{console.log("This Point has no Animation")}x=!x?0:x;y=!y?0:y;s=!this.ptSize?1:this.ptSize;a=s/2;if(this.canResize()){s=s*this.modifier}if(this.canFade()){c2d.globalAlpha=this.alpha*this.modifier}c2d.fillStyle=this.color;c2d.fillRect(x-a,y-a,s,s)}}(P,P.Rect=P.Rect||function(anim,data){var d=!data?{}:data;if(anim){this.Animation=anim}this.ptSize=!d.size?anim.ptSize:d.size;this.color=d.color?d.color:anim.color;this.alpha=d.alpha?d.alpha:anim.alpha;this.paths=new Juice.Path(anim,d.paths);this.trail=(!d.trail)?new Juice.Trail(anim.trail):new Juice.Trail(d.trail);if(this.trail){var t=this.trail,a=this.Animation;this.trail.distance=(t.length/a.length)/(t.points+1)}return this}))}(S,S.Point=S.Point||function(anim,data){var d=!data?{}:data;this.type=!d.type?"rect":d.type;if(this.type=="round"){return new S.Point.Round(anim,data)}else{return new S.Point.Rect(anim,data)}}));(function(S,T){}(S,S.Trail=S.Trail||function(data){var data=!data?{}:data;var me=this,d=data;me.length=!d.length?500:d.length;me.points=!d.points?10:d.points;me.fade=!d.fade?typeof d.fade=="undefined"?true:d.fade:d.fade;me.transform=!d.transform?typeof d.transform=="undefined"?false:d.transform:d.transform;return me}));(function(S,P){(function(P,L){L.prototype.draw=function(p,pt){var x=this.x1+((this.x2-this.x1)*p),y=this.y1+((this.y2-this.y1)*p);pt.render(x,y)}}(P,P.Line=P.Line||function(anim,data){var d=!data?{}:data;this.x1=!d.x1?0:d.x1;this.y1=!d.y1?anim.h/2:d.y2;this.x2=!d.x2?anim.w:d.x2;this.y2=!d.y2?anim.h/2:d.y2;return this}));(function(P,A){A.prototype.draw=function(progress,pt){var x=this.x,y=this.y,adj=pt.ptSize/2,r=this.r-adj,start=this.start,end=this.end;var angle=Math.PI*(end+(progress*(start-end)))/180,x=r*Math.sin(angle)+x,y=r*Math.cos(angle)+y;pt.render(x,y)}}(P,P.Arc=P.Arc||function(anim,data){var d=!data?{}:data;this.x=!d.ctrX?anim.w/2:d.ctrX;this.y=!d.ctrY?anim.h/2:d.ctrY;this.r=!d.radius?((anim.w>anim.h)?anim.w/2:anim.h/2):d.radius;this.start=!d.start?0:d.start;this.end=!d.end?360:d.end;return this}));(function(P,E){}(P,P.Ellipse=P.Ellipse||function(anim,data){return this}));(function(P,B){B.prototype.draw=function(progress,pt){var adj=pt.ptSize/2;var p1x=this.startX,p1y=this.startY,p2x=this.endX,p2y=this.endY,cp1x=this.cp1x,cp1y=this.cp1y,cp2x=this.cp2x,cp2y=this.cp2y;var h=(1-progress)*(1-progress)*(1-progress),p=3*(1-progress)*(1-progress)*progress,d=3*(1-progress)*progress*progress,v=progress*progress*progress;var x=h*p1x+p*cp1x+d*cp2x+v*p2x,y=h*p1y+p*cp1y+d*cp2y+v*p2y;pt.render(x,y)}}(P,P.Bezier=P.Bezier||function(anim,data){d=!data?{}:data;this.startX=d.startX;this.startY=d.startY;this.endX=d.endX;this.endY=d.endY;this.cp1x=d.cp1x;this.cp1y=d.cp1y;this.cp2x=d.cp2x;this.cp2y=d.cp2y;return this}))}(S,S.Path=S.Path||function(anim,data){var d=!data?{}:data;var me=this;me.name=!d.name?"":d.name;if(me.name=="line"){return new Juice.Path.Line(anim,data)}else{if(me.name=="arc"){return new Juice.Path.Arc(anim,data)}else{if(me.name=="bezier"){return new Juice.Path.Bezier(anim,data)}else{if(me.name=="ellipse"){return new Juice.Path.Ellipse(anim,data)}}}}}));if($){(function(S,$){S.Animation=Juice.Animation;S.play=function(items){return $(items).each(function(){var d=$(this).data(ns);if(d instanceof Juice.Animation){d.play()}})};S.stop=function(items){return $(items).each(function(){var d=$(this).data(ns);if(d instanceof Juice.Animation){d.stop()}})}}($.Juice=$.Juice||function(){return this.each(function(){return this})},$));(function(S,fn){S.methods={init:function(options){var jQ=$,link=jQFind(this,true);link.play=jQPlay;link.stop=jQStop;tmpItems=link;$.each(link,function(){var me=this,$me=$(this),d=$me.data(ns);if(!d){options.context=me.getContext("2d");$me.data(ns,new Juice.Animation(options));d=$me.data(ns);$me.attr("height",d.hFull);$me.attr("width",d.wFull)}});var $link=$(link);$link.play=function(){return jQPlay($(link))};return $link},play:function(){var list=jQFind(this,false);return jQPlay(list)},stop:function(){var list=jQFind(this,false);return jQStop(list)},};S.play=function(){return jQPlay(this.jQCache)};S.stop=function(){return jQStop(this.jQCache)}}($.fn.Juice=$.fn.Juice||function(method){var ns=$.fn.Juice;var fn=$.fn.Juice.methods;if(fn[method]){return fn[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"){return fn.init.apply(this,arguments)}else{if(typeof method=="undefined"){ns.jQCache=this;this.play=function(){return jQPlay(this)};this.stop=function(){return jQStop(this)};return this}}}},$.fn))}var tmpItems;var jQPlay=function(items){if(typeof items=="undefined"){items=tmpItems}return $.each(items,function(){var d=$(this).data(ns);if(d instanceof Juice.Animation){d.play()}})};var jQStop=function(items){return $.each(items,function(){var d=$(this).data(ns);if(d instanceof Juice.Animation){d.stop()}})};var jQFind=function(items,addMissing){var list=[];items.each(function(){if($(this).prop("tagName")!="CANVAS"){if(addMissing){var a=document.createElement("canvas");$(a).addClass("Juice");$(this).prepend($(a));list.push(a)}}else{list.push(this)}});return list}}(window.Juice=window.Juice||function(){},jQuery));