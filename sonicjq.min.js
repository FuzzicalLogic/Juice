(function(e){var t="Sonic";var n=function(){};var r;var i={cache:[],width:50,height:50,padding:0,fps:40,size:10,alpha:.9,points:[{}],path:[["line",1,1,1,1]],length:1e3,setup:n,teardown:n,preStep:n,domClass:"Sonic"};var s={size:10,color:"#000000",paths:[["line",1,1,1,1]]};var o={length:500,points:15};var u=argTypes={DIM:1,DEGREE:2,RADIUS:3,OTHER:0};var a=argSignatures={arc:[1,1,3,2,2,0],bezier:[1,1,1,1,1,1,1,1],line:[1,1,1,1]};var f=pathMethods={bezier:function(e,t,n,r,i,s,o,u,a){e=1-e;var f=1-e,l=e*e,c=f*f,h=l*e,p=3*l*f,d=3*e*c,v=c*f;return[h*t+p*s+d*u+v*r,h*n+p*o+d*a+v*i]},arc:function(e,t,n,r,i,s){var o=(s-i)*e+i;var u=[Math.cos(o)*r+t,Math.sin(o)*r+n];u.angle=o;u.t=e;return u},line:function(e,t,n,r,i){return[(r-t)*e+t,(i-n)*e+n]}};var l=stepMethods={square:function(e,t,n,r,i){r.fillRect(e.x-3,e.y-3,6,6)},fader:function(e,t,n,r,i){r.beginPath();if(this._last){this._.moveTo(this._last.x,this._last.y)}r.lineTo(e.x,e.y);r.closePath();r.stroke();this._last=e}};var c=function(n){if(typeof n=="undefined")n=r;return e.each(n,function(){var n=e(this),r=n.data(t);console.log(r);var i=r.fps,s=r.length,o=1e3,u=i*(s/o);r.maxFrames=u;r.setup(r);r.isStopped=false;if(r.timer)clearInterval(r.timer);r.timer=setInterval(function(){p(r)},1e3/i)})};var h=function(n){console.log("Stopping all animations!");list.each(function(){var n=e(this),r=n.data(t);r.isStopped=true})};var p=function(e){var t=e.frame,n=e.maxFrames,r=e.context,i=e.cache;if(!t)e.frame=0;r.clearRect(0,0,e.fullWidth,e.fullWidth);if(t in i)r.putImageData(i[t],0,0);else e.cache[t]=d(e);if(++e.frame>=n)e.frame=0};var d=function(t){var n=t.frame,r=t.context;var i=t.fullWidth,s=t.fullHeight;r.globalAlpha=t.alpha;var o=0,u=0;if(t.trail){o=t.trail.points;u=t.trail.length/t.length/o}var a=n/t.maxFrames;var f,l;e.each(t.points,function(){for(var e=0,n=o+1;++e<=n&&!t.isStopped;){f=a-(n-e)*u;l=e/n;r.globalAlpha=e/n*t.alpha;if(this.color){r.fillStyle=this.color;r.strokeStyle=this.color}else{r.fillStyle=t.color;r.fillStyle=t.color}if(this.paths)this.paths(t,f,l,this);else t.step(t,f,l,this)}});return r.getImageData(0,0,i,s)};var v={init:function(n){var s=e,u=m(this,true);n=e.extend(i,n);if(n.trail)n.trail=e.extend(o,n.trail);u.play=c;u.stop=h;r=u;return e.each(u,function(){var r=this,i=e(this),s=i.data(t);if(!s){i.data(t,e.extend({},n));s=i.data(t);if(typeof s.step!="function")s.step=g(s.path);s.context=r.getContext("2d");s.fullWidth=s.width+2*s.padding;s.fullHeight=s.height+2*s.padding;s.play=function(){};i.attr("height",s.fullHeight);i.attr("width",s.fullWidth)}})},play:function(){console.log("jQuery just played me");var e=m(this,false);return c(e)},stop:function(){console.log("jQuery just played me");var e=m(this,false);return h(e)},play:function(){}};e.Sonic=function(n,r){console.log(n instanceof e);if(typeof n=="object"){if(n instanceof e){var s=m(n,r);s.play=function(){};return s}else{n=e.extend(i,n);var o=document.createElement("canvas");e(o).addClass(n.domClass);e(o).data(t,n);return e(o)}}};e.fn.Sonic=function(t){if(v[t]){return v[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return v.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.tooltip")}};e.fn.Sonic.play=function(e){};var m=function(t,n){var r=[];t.each(function(){if(e(this).prop("tagName")!="CANVAS"){if(n){var t=document.createElement("canvas");e(t).addClass("Sonic");e(this).prepend(e(t));r.push(t)}}else r.push(this)});return r};var g=function(e){}})(jQuery)
